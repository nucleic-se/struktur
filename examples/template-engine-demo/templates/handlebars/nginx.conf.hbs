# Generated by Struktur (Handlebars)
# Build time: {{buildContext.timestamp}}

{{#each (where instances "class" "web_service")}}
# {{name}} - {{description}}
server {
    listen {{$aspects.web_service.port}};
    server_name {{$aspects.web_service.hostname}};

{{#if $aspects.web_service.ssl_enabled}}
    # SSL Configuration
    ssl_certificate {{$aspects.web_service.ssl_cert}};
    ssl_certificate_key {{$aspects.web_service.ssl_key}};
    ssl_protocols TLSv1.2 TLSv1.3;
{{/if}}

    location / {
        proxy_pass {{$aspects.web_service.protocol}}://{{$aspects.web_service.hostname}}:{{$aspects.web_service.port}};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

{{/each}}
