# Generated by Struktur (Handlebars)
# Build time: {{$metadata.timestamp}}

{{#each (where $instances "$class" "web_service")}}
# {{name}} - {{description}}
server {
    listen {{$aspects.aspect_web_service.port}};
    server_name {{$aspects.aspect_web_service.hostname}};

{{#if $aspects.aspect_web_service.ssl_enabled}}
    # SSL Configuration
    ssl_certificate {{$aspects.aspect_web_service.ssl_cert}};
    ssl_certificate_key {{$aspects.aspect_web_service.ssl_key}};
    ssl_protocols TLSv1.2 TLSv1.3;
{{/if}}

    location / {
        proxy_pass {{$aspects.aspect_web_service.protocol}}://{{$aspects.aspect_web_service.hostname}}:{{$aspects.aspect_web_service.port}};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

{{/each}}
